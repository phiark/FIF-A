# SST-2 噪声鲁棒性实验记录（混合架构 vs. 基准线）

## 1. 实验背景
- **数据集**：SST-2 带不同强度的字符扰动、词删除与片段删除噪声。
- **对比对象**：`baseline`（基准线模型）与 `hybrid`（混合架构）。
- **随机种子**：42；所有运行均来自 `result/` 目录下对应时间戳的子文件夹。

### 噪声设置
| 噪声等级 | char_noise_p | word_drop_p | span_drop_p |
| --- | --- | --- | --- |
| low | 0.02 | 0.01 | 0.00 |
| med | 0.05 | 0.03 | 0.02 |
| high | 0.10 | 0.05 | 0.05 |

## 2. 测试集关键指标对比
| Noise | Metric | Baseline | Hybrid | Delta (Hybrid-Baseline) |
|---|---|---|---|---|
| low | acc | 0.7706 | 0.7523 | -0.0183 |
|  | macro_f1 | 0.7706 | 0.7516 | -0.0190 |
|  | loss | 0.5394 | 0.6184 | +0.0790 |
|  | ece | 0.0969 | 0.1235 | +0.0266 |
|  | energy_mean_test | 77.7529 | 5495.7031 | +5417.9502 |
| med | acc | 0.7030 | 0.6892 | -0.0138 |
|  | macro_f1 | 0.7019 | 0.6825 | -0.0194 |
|  | loss | 0.8036 | 0.8199 | +0.0163 |
|  | ece | 0.1798 | 0.1915 | +0.0116 |
|  | energy_mean_test | 147.5207 | 1495.7798 | +1348.2591 |
| high | acc | 0.6663 | 0.6273 | -0.0390 |
|  | macro_f1 | 0.6586 | 0.6093 | -0.0493 |
|  | loss | 0.8557 | 0.9565 | +0.1009 |
|  | ece | 0.1886 | 0.2338 | +0.0452 |
|  | energy_mean_test | 54.9505 | 1843.4103 | +1788.4598 |

> 指标定义：`acc`=准确率，`macro_f1`=宏平均 F1，`loss`=交叉熵损失，`ece`=预估-真实置信度差异（越低越好），`energy_mean_test`=能量得分均值（越低表示更稳定）。

## 3. 结果分析
### 3.1 低噪声（low）
- 基准线在准确率/宏 F1 上领先 1.8–1.9pp，混合架构出现轻微退化。
- 混合架构的损失与 ECE 略高，说明其在校准和收敛上均弱于基准。
- `energy_mean_test` 急剧升高（+5417），可能表明混合架构对小扰动非常敏感，能量超出训练分布。

### 3.2 中噪声（med）
- 两种模型准确率差距缩小到 1.4pp，但混合架构的宏 F1 仍低 1.9pp，提示其在非平衡类别上的鲁棒性不足。
- 损失和 ECE 均略高，校准仍落后。
- 能量均值高出约 9 倍，说明混合架构对中等噪声依旧没有稳定表示。

### 3.3 高噪声（high）
- 性能差距进一步扩大：准确率-3.9pp，宏 F1-4.9pp，混合架构未能体现预期优势。
- 损失、ECE 继续拉大，混合架构在极端噪声下的预测不确定性更严重。
- 能量均值提升 30 多倍，显示混合架构在强噪声下的能量分布严重偏移，可能导致判别层失效或需能量正则。

## 4. 结论与建议
1. **整体表现**：在所有噪声等级上，基准线模型在准确率、宏 F1、ECE 与损失方面均优于混合架构；混合架构的能量得分高出 9–70 倍，未体现预期的鲁棒性收益。
2. **潜在问题**：混合架构可能缺少针对能量爆炸的归一化策略，或在噪声增强管线下未做参数/学习率调优。
3. **后续方向**：建议先在低噪声环境下调节混合架构的能量或温度参数，再逐步提高噪声；同时记录中间层表示的范数，以定位能量异常来源。

—— 记录时间：`2025-11-09` 
